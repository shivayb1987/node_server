{"version":3,"sources":["../src/log.js"],"names":["logDirectory","join","__dirname","existsSync","mkdirSync","pad","num","generator","time","index","month","getFullYear","getMonth","day","getDate","hour","getHours","minute","getMinutes","stream","path","size","interval","compress"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,eAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAArB;AACA,IAAI,CAAC,aAAGC,UAAH,CAAcH,YAAd,CAAL,EAAkC;AAChC,eAAGI,SAAH,CAAaJ,YAAb;AACD;;AAED,IAAMK,MAAM,SAANA,GAAM;AAAA,SAAQ,CAACC,MAAM,CAAN,GAAU,EAAV,GAAe,GAAhB,IAAuBA,GAA/B;AAAA,CAAZ;;AAEA,IAAMC,YAAY,SAAZA,SAAY,CAACC,IAAD,EAAOC,KAAP,EAAiB;AACjC,MAAI,CAACD,IAAL,EAAW;AACT,WAAO,UAAP;AACD;AACD,MAAME,QAAWF,KAAKG,WAAL,EAAX,SAAiCN,IAAIG,KAAKI,QAAL,KAAkB,CAAtB,CAAvC;AACA,MAAMC,MAAMR,IAAIG,KAAKM,OAAL,EAAJ,CAAZ;AACA,MAAMC,OAAOV,IAAIG,KAAKQ,QAAL,EAAJ,CAAb;AACA,MAAMC,SAASZ,IAAIG,KAAKU,UAAL,EAAJ,CAAf;;AAEA,SAAUR,KAAV,SAAmBA,KAAnB,GAA2BG,GAA3B,SAAkCE,IAAlC,GAAyCE,MAAzC,SAAmDR,KAAnD;AACD,CAVD;;AAYA,IAAMU,SAAS,kCAAIZ,SAAJ,EAAe;AAC5Ba,QAAMpB,YADsB;AAE5BqB,QAAM,KAFsB,EAEf;AACbC,YAAU,IAHkB,EAGZ;AAChBC,YAAU,MAJkB,CAIV;AAJU,CAAf,CAAf;;kBAOe,sBAAO,KAAP,EAAc,EAAEJ,cAAF,EAAd,C","file":"log.js","sourcesContent":["import rfs from 'rotating-file-stream';\nimport fs from 'fs';\nimport morgan from 'morgan';\nimport path from 'path';\n\nconst logDirectory = path.join(__dirname, '../log');\nif (!fs.existsSync(logDirectory)) {\n  fs.mkdirSync(logDirectory);\n}\n\nconst pad = num => ((num > 9 ? '' : '0') + num);\n\nconst generator = (time, index) => {\n  if (!time) {\n    return 'file.log';\n  }\n  const month = `${time.getFullYear()} ${pad(time.getMonth() + 1)}`;\n  const day = pad(time.getDate());\n  const hour = pad(time.getHours());\n  const minute = pad(time.getMinutes());\n\n  return `${month}/${month}${day}-${hour}${minute}-${index}-file.log`;\n};\n\nconst stream = rfs(generator, {\n  path: logDirectory,\n  size: '10M', // rotate every 10 MegaBytes written\n  interval: '1d', // rotate daily\n  compress: 'gzip', // compress rotated files\n});\n\nexport default morgan('dev', { stream });\n"]}